<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
<f:view>
    <h:head>
        <title>Lab 3</title>
        <h:outputStylesheet library="styles" name="main.css"/>
        <h:outputStylesheet library="styles" name="shots-style.css"/>
        <h:outputStylesheet library="styles" name="form.css"/>
        <h:outputStylesheet library="styles" name="results.css"/>
        <script type="text/javascript" src="https://code.jquery.com/jquery-3.1.1.js"></script>
    </h:head>
    <body>
    <div id="content">
        <h:form>
            <h:commandButton value="На главную" styleClass="navigation-button" action="toIndex"/>
        </h:form>
        <div id="controlls">
            <div id="form-container" class="container">
                <h:form>
                    <div id="x-value" class="field">
                        X:
                        <div class="button-block">
                            <label>
                                <h:commandButton class="numbered-button" value="-2" action="#{shotBean.setX(-2)}"/>
                            </label>
                        </div>
                        <div class="button-block">
                            <label>
                                <h:commandButton class="numbered-button" value="-1.5" action="#{shotBean.setX(-1.5)}"/>
                            </label>
                        </div>
                        <div class="button-block">
                            <label>
                                <h:commandButton class="numbered-button" value="-1" action="#{shotBean.setX(-1)}"/>
                            </label>
                        </div>
                        <div class="button-block">
                            <label>
                                <h:commandButton class="numbered-button" value="-0.5" action="#{shotBean.setX(-0.5)}"/>
                            </label>
                        </div>
                        <div class="button-block">
                            <label>
                                <h:commandButton class="numbered-button" value="0" action="#{shotBean.setX(0)}"/>
                            </label>
                        </div>
                        <div class="button-block">
                            <label>
                                <h:commandButton class="numbered-button" value="0.5" action="#{shotBean.setX(0.5)}"/>
                            </label>
                        </div>
                        <div class="button-block">
                            <label>
                                <h:commandButton class="numbered-button" value="1" action="#{shotBean.setX(1)}"/>
                            </label>
                        </div>
                        <div class="button-block">
                            <label>
                                <h:commandButton class="numbered-button" value="1.5" action="#{shotBean.setX(1.5)}"/>
                            </label>
                        </div>
                        <div class="button-block">
                            <label>
                                <h:commandButton class="numbered-button" value="2" action="#{shotBean.setX(2)}"/>
                            </label>
                        </div>
                        <div id="x-preview">
                            <h:outputText value="#{shotBean.x}"/>
                        </div>
                    </div>
                    <div id="y-value" class="field">
                        Y:
                        <label>
                            <h:inputText id="y-input" class="text-field" required="true" requiredMessage="Введите число y"
                                         validatorMessage="Число должно лежать в диапазоне (-3 ... 3)"
                                         value="#{shotBean.y}"
                                         converter="javax.faces.Double"
                                         converterMessage="Некорректное число"
                            />
                        </label>
                    </div>
                    <div id="r-value" class="field">
                        R:
                        <div class="checkbox-block">
                            1 <br/>
                            <label>
                                <h:selectBooleanCheckbox class="checkbox" id="checkbox-1" value="false"
                                                 valueChangeListener="#{selectRController.toggle(1)}"/>
                            </label>
                        </div>
                        <div class="checkbox-block">
                            1.5 <br/>
                            <label>
                                <h:selectBooleanCheckbox class="checkbox" id="checkbox-15" value="false"
                                                         valueChangeListener="#{selectRController.toggle(1.5)}"/>
                            </label>
                        </div>
                        <div class="checkbox-block">
                            2 <br/>
                            <label>
                                <h:selectBooleanCheckbox class="checkbox" id="checkbox-2" value="false"
                                                         valueChangeListener="#{selectRController.toggle(2)}"/>
                            </label>
                        </div>
                        <div class="checkbox-block">
                            2.5 <br/>
                            <label>
                                <h:selectBooleanCheckbox class="checkbox" id="checkbox-25" value="false"
                                                         valueChangeListener="#{selectRController.toggle(2.5)}"/>
                            </label>
                        </div>
                        <div class="checkbox-block">
                            3 <br/>
                            <label>
                                <h:selectBooleanCheckbox class="checkbox" id="checkbox-3" value="false"
                                                         valueChangeListener="#{selectRController.toggle(3)}"/>
                            </label>
                        </div>
                    </div>
                    <h:commandButton class="fire-button" value="FIRE!" action="#{shotBean.shot()}"/>
                </h:form>
            </div>
            <div id="image-container" class="container">
                <h:graphicImage id="background" library="images" name="web3.png" alt="image failed"/>
                <canvas id="canvas">

                </canvas>
            </div>
        </div>
        <br/>

        <p class="errorDisplay">

        </p>

        <br/>
        <h:dataTable value="#{listBean.shots}" var="shot"
                     styleClass="results-table"
                     headerClass="table-header">
            <h:column>
                <f:facet name="header">X</f:facet>
                #{shot.x}
            </h:column>
            <h:column>
                <f:facet name="header">Y</f:facet>
                #{shot.y}
            </h:column>
            <h:column>
                <f:facet name="header">R</f:facet>
                #{shot.r}
            </h:column>
            <h:column>
                <f:facet name="header">Дата и Время</f:facet>
                #{shot.requestTime}
            </h:column>
            <h:column>
                <f:facet name="header">Время Обработки</f:facet>
                #{shot.processingTime}
            </h:column>
            <h:column>
                <f:facet name="header">Попал ?</f:facet>
                #{shot.isSuccessString}
            </h:column>
        </h:dataTable>
    </div>
    </body>
</f:view>
</html>
